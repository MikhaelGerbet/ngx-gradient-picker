<svg 
  [attr.width]="width()" 
  [attr.height]="height()"
  class="palette-svg"
  preserveAspectRatio="none">
  <defs>
    <!-- Checkerboard pattern for transparency -->
    <pattern id="checkerboard" width="8" height="8" patternUnits="userSpaceOnUse">
      <rect width="4" height="4" fill="#ccc"/>
      <rect x="4" width="4" height="4" fill="#fff"/>
      <rect y="4" width="4" height="4" fill="#fff"/>
      <rect x="4" y="4" width="4" height="4" fill="#ccc"/>
    </pattern>
    
    <!-- Gradient definition (only when multiple stops) -->
    @if (!isSolidColor()) {
      <linearGradient [attr.id]="gradientId" x1="0%" y1="0%" x2="100%" y2="0%">
        @for (stop of gradientStops(); track stop.offset) {
          <stop 
            [attr.offset]="stop.offset" 
            [attr.stop-color]="stop.color"
            [attr.stop-opacity]="stop.opacity"/>
        }
      </linearGradient>
    }
  </defs>
  
  <!-- Checkerboard background for transparency preview -->
  <rect 
    width="100%" 
    height="100%" 
    fill="url(#checkerboard)"
    rx="4"/>
  
  <!-- Solid color (single stop) or Gradient overlay -->
  @if (isSolidColor()) {
    <rect 
      width="100%" 
      height="100%" 
      [attr.fill]="solidColor()"
      rx="4"/>
  } @else {
    <rect 
      width="100%" 
      height="100%" 
      [attr.fill]="'url(#' + gradientId + ')'"
      rx="4"/>
  }
</svg>
