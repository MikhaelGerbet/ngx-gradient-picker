<div class="demo-container">
  <!-- GitHub Corner - Animated octocat -->
  <a href="https://github.com/MikhaelGerbet/ngx-gradient-picker" class="github-corner" aria-label="View source on GitHub" target="_blank">
    <svg width="80" height="80" viewBox="0 0 250 250" style="fill:#667eea; color:#f4f6f9; position: absolute; top: 0; border: 0; right: 0;" aria-hidden="true">
      <path d="M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z"></path>
      <path d="M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2" fill="currentColor" style="transform-origin: 130px 106px;" class="octo-arm"></path>
      <path d="M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z" fill="currentColor" class="octo-body"></path>
    </svg>
  </a>
  <header class="demo-header">
    <h1>ngx-gradient-picker</h1>
    <p>A modern Angular gradient picker with draggable color stops</p>
    <div class="badges">
      <img src="https://img.shields.io/npm/v/ngx-gradient-picker?style=flat-square" alt="npm version">
      <img src="https://img.shields.io/npm/l/ngx-gradient-picker?style=flat-square" alt="license">
      <img src="https://img.shields.io/badge/Angular-17%2B-dd0031?style=flat-square&logo=angular" alt="Angular 17+">
      <img src="https://img.shields.io/badge/gzip-~15KB-brightgreen?style=flat-square" alt="Bundle size">
      <img src="https://github.com/MikhaelGerbet/ngx-gradient-picker/actions/workflows/ci.yml/badge.svg" alt="CI">
    </div>
  </header>

  <main class="demo-content">
    <!-- Live Demo Section -->
    <section class="demo-section">
      <h2>Live Demo</h2>
      <p class="hint">
        <strong>Double-tap</strong> on the gradient bar to add a stop • 
        <strong>Drag</strong> stops to reposition • 
        <strong>Double-tap</strong> stop to change color • 
        <strong>Drag down</strong> to delete
      </p>
      
      <div class="picker-wrapper">
        <ngx-gradient-picker
          #picker
          [(palette)]="palette"
          [(angle)]="angle"
          [(type)]="type"
          [paletteHeight]="40"
          [minStops]="1"
          [maxStops]="6"/>
      </div>

      <div class="output-section">
        <h3>Generated CSS</h3>
        <code class="css-output">background: {{ getGradientCSS() }};</code>
      </div>

      <div class="preview-box" [style.background]="getGradientCSS()">
        Live Preview
      </div>
    </section>

    <!-- Popover Mode Demo -->
    <section class="demo-section">
      <h2>Popover Mode</h2>
      <p>Perfect for forms and compact UIs. The picker automatically adapts to the device.</p>
      
      <h3>Auto Mode (Default)</h3>
      <p>Detects mobile/desktop automatically: bottom-sheet on mobile, popover on desktop.</p>
      <div class="popover-demo">
        <ngx-gradient-picker-popover
          [(palette)]="popoverAutoPalette"
          [(angle)]="popoverAutoAngle"
          [(type)]="popoverAutoType"
          [width]="350">
        </ngx-gradient-picker-popover>
        
        <span class="popover-label">← Linear gradient (auto-detect device)</span>
      </div>

      <h3>Force Popover</h3>
      <p>Use <code>position="bottom"</code> to always show a popover, even on mobile:</p>
      <div class="popover-demo">
        <ngx-gradient-picker-popover
          [(palette)]="popoverForcePalette"
          [(angle)]="popoverForceAngle"
          [(type)]="popoverForceType"
          [width]="350"
          [position]="'bottom'">
        </ngx-gradient-picker-popover>
        
        <span class="popover-label">← Radial gradient (always popover)</span>
      </div>

      <h3>Force Bottom-Sheet</h3>
      <p>Use <code>position="bottom-sheet"</code> to always show a bottom-sheet, even on desktop:</p>
      <div class="popover-demo">
        <ngx-gradient-picker-popover
          [(palette)]="bottomSheetPalette"
          [(angle)]="bottomSheetAngle"
          [(type)]="bottomSheetType"
          [width]="350"
          [position]="'bottom-sheet'">
        </ngx-gradient-picker-popover>
        
        <span class="popover-label">← Conic gradient (always bottom-sheet)</span>
      </div>
    </section>

    <!-- Auto-Detection Examples -->
    <section class="demo-section auto-detect">
      <h2>CSS Auto-Detection</h2>
      <p>The picker can parse CSS gradient strings and automatically detect the type, angle, and color stops. <strong>Click a card</strong> to open it in the picker!</p>
      
      <div class="auto-detect-grid">
        @for (example of autoDetectExamples; track example.label) {
          <div class="auto-detect-card" (click)="openAutoDetectPicker(example.input)" role="button" tabindex="0">
            <div class="card-preview" [style.background]="example.input">
              <span class="card-preview-hint">Click to edit</span>
            </div>
            <div class="card-content">
              <h4>{{ example.label }}</h4>
              <p class="card-description">{{ example.description }}</p>
              <code class="card-input">{{ example.input }}</code>
              <div class="card-result">
                <span class="result-badge type">{{ getAutoDetectResult(example.input).type }}</span>
                <span class="result-badge angle">{{ getAutoDetectResult(example.input).angle }}°</span>
                <span class="result-badge stops">{{ getAutoDetectResult(example.input).stops }} stops</span>
              </div>
            </div>
          </div>
        }
      </div>

      <!-- Auto-detect picker dialog -->
      @if (autoDetectDialogOpen()) {
        <div class="auto-detect-dialog-backdrop" (click)="closeAutoDetectDialog()"></div>
        <div class="auto-detect-dialog">
          <div class="dialog-header">
            <h3>Edit Gradient</h3>
            <button class="dialog-close" (click)="closeAutoDetectDialog()">×</button>
          </div>
          <div class="dialog-body">
            <ngx-gradient-picker
              [(palette)]="autoDetectPalette"
              [(angle)]="autoDetectAngle"
              [(type)]="autoDetectType"
              [(repeatSize)]="autoDetectRepeatSize"
              [paletteHeight]="32"
              [minStops]="1"
              [maxStops]="10"/>
          </div>
          <div class="dialog-footer">
            <code class="dialog-output">{{ getAutoDetectDialogCSS() }}</code>
          </div>
        </div>
      }

      <div class="code-block">
        <div class="code-header">
          <span>Usage</span>
        </div>
        <pre><code>import &#123; parseGradientCSS &#125; from 'ngx-gradient-picker';

const css = 'linear-gradient(135deg, #667eea 0%, #764ba2 100%)';
const config = parseGradientCSS(css);
// config = &#123; type: 'linear', angle: 135, stops: [...] &#125;

// Then use in your picker:
palette.set(config.stops);
angle.set(config.angle);
type.set(config.type);</code></pre>
      </div>
    </section>

    <!-- Installation Section -->
    <section class="demo-section installation">
      <h2>Installation</h2>
      
      <div class="code-block">
        <div class="code-header">
          <span>npm</span>
          <button class="copy-btn" (click)="copyToClipboard('npm install ngx-gradient-picker')">Copy</button>
        </div>
        <pre><code>npm install ngx-gradient-picker</code></pre>
      </div>

      <div class="code-block">
        <div class="code-header">
          <span>yarn</span>
          <button class="copy-btn" (click)="copyToClipboard('yarn add ngx-gradient-picker')">Copy</button>
        </div>
        <pre><code>yarn add ngx-gradient-picker</code></pre>
      </div>

      <div class="code-block">
        <div class="code-header">
          <span>pnpm</span>
          <button class="copy-btn" (click)="copyToClipboard('pnpm add ngx-gradient-picker')">Copy</button>
        </div>
        <pre><code>pnpm add ngx-gradient-picker</code></pre>
      </div>
    </section>

    <!-- Usage Examples Section -->
    <section class="demo-section usage">
      <h2>Quick Start</h2>

      <h3>Basic Usage</h3>
      <div class="code-block">
        <div class="code-header">
          <span>app.component.ts</span>
        </div>
        <pre><code>{{ basicUsageCode }}</code></pre>
      </div>

      <h3>Template</h3>
      <div class="code-block">
        <div class="code-header">
          <span>app.component.html</span>
        </div>
        <pre><code>{{ basicTemplateCode }}</code></pre>
      </div>
    </section>

    <!-- Reactive Forms Section -->
    <section class="demo-section reactive-forms-demo">
      <h2>Reactive Forms Integration</h2>
      <p>The gradient picker works seamlessly with Angular Reactive Forms. Here's a live example:</p>
      
      <div class="reactive-forms-layout">
        <div class="form-side">
          <h3>Theme Builder Form</h3>
          <form [formGroup]="themeForm" class="theme-form">
            <div class="form-field">
              <label for="themeName">Theme Name</label>
              <input id="themeName" type="text" formControlName="themeName">
            </div>
            
            <div class="form-field">
              <label>Gradient Background</label>
              <ngx-gradient-picker
                [(palette)]="reactiveFormPalette"
                [(angle)]="reactiveFormAngle"
                [(type)]="reactiveFormType"
                [paletteHeight]="28"
                [minStops]="2"
                [maxStops]="6"/>
            </div>
          </form>
          
          <div class="live-preview-card" [style.background]="reactiveFormCSS()">
            <span class="preview-label">{{ themeForm.get('themeName')?.value }}</span>
          </div>
        </div>
        
        <div class="values-side">
          <h3>Form Values (Real-time)</h3>
          <div class="values-panel">
            <div class="value-row">
              <span class="value-label">Form Group:</span>
              <code class="value-content">{{ themeForm.value | json }}</code>
            </div>
            <div class="value-row">
              <span class="value-label">Gradient Type:</span>
              <code class="value-content">{{ reactiveFormType() }}</code>
            </div>
            <div class="value-row">
              <span class="value-label">Angle:</span>
              <code class="value-content">{{ reactiveFormAngle() }}°</code>
            </div>
            <div class="value-row">
              <span class="value-label">Color Stops:</span>
              <code class="value-content stops-list">
                @for (stop of reactiveFormPalette(); track stop.id) {
                  <span class="stop-chip" [style.background]="stop.color">
                    {{ (stop.offset * 100).toFixed(0) }}%
                  </span>
                }
              </code>
            </div>
            <div class="value-row">
              <span class="value-label">Generated CSS:</span>
              <code class="value-content css-output">{{ reactiveFormCSS() }}</code>
            </div>
          </div>
        </div>
      </div>

      <h3>Code Example</h3>
      <div class="code-block">
        <div class="code-header">
          <span>form.component.ts</span>
        </div>
        <pre><code>{{ reactiveFormCode }}</code></pre>
      </div>

      <div class="code-block">
        <div class="code-header">
          <span>form.component.html</span>
        </div>
        <pre><code>{{ reactiveFormTemplateCode }}</code></pre>
      </div>
    </section>

    <!-- API Reference Section -->
    <section class="demo-section api">
      <h2>API Reference</h2>
      
      <h3>GradientPickerComponent</h3>
      <div class="api-table-wrapper">
        <table class="api-table">
          <thead>
            <tr>
              <th>Input/Output</th>
              <th>Type</th>
              <th>Default</th>
              <th>Description</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td><code>[(palette)]</code></td>
              <td><code>ColorStop[]</code></td>
              <td>-</td>
              <td>Two-way binding for color stops array</td>
            </tr>
            <tr>
              <td><code>[(angle)]</code></td>
              <td><code>number</code></td>
              <td><code>90</code></td>
              <td>Gradient angle in degrees (0-360)</td>
            </tr>
            <tr>
              <td><code>[(type)]</code></td>
              <td><code>GradientType</code></td>
              <td><code>'linear'</code></td>
              <td>Gradient type: 'linear' | 'radial' | 'conic' | 'repeating-*'</td>
            </tr>
            <tr>
              <td><code>[width]</code></td>
              <td><code>number</code></td>
              <td><code>300</code></td>
              <td>Width of the gradient picker</td>
            </tr>
            <tr>
              <td><code>[paletteHeight]</code></td>
              <td><code>number</code></td>
              <td><code>24</code></td>
              <td>Height of the gradient bar</td>
            </tr>
            <tr>
              <td><code>[minStops]</code></td>
              <td><code>number</code></td>
              <td><code>1</code></td>
              <td>Minimum number of color stops (1 allows solid colors)</td>
            </tr>
            <tr>
              <td><code>[maxStops]</code></td>
              <td><code>number</code></td>
              <td><code>50</code></td>
              <td>Maximum number of color stops</td>
            </tr>
            <tr>
              <td><code>(stopSelect)</code></td>
              <td><code>EventEmitter&lt;ColorStop&gt;</code></td>
              <td>-</td>
              <td>Emits when a stop is selected</td>
            </tr>
          </tbody>
        </table>
      </div>

      <h3>ColorStop Interface</h3>
      <div class="code-block">
        <pre><code>{{ colorStopInterface }}</code></pre>
      </div>

      <h3>Helper Functions</h3>
      <div class="code-block">
        <pre><code>{{ helperFunctionsCode }}</code></pre>
      </div>
    </section>

    <!-- Features List -->
    <section class="demo-section features">
      <h2>Features</h2>
      <ul>
        <li>Draggable color stops with smooth animations</li>
        <li>Click on gradient bar to add new stops</li>
        <li>Drag stops down to remove them</li>
        <li>Double-click stops to open color picker</li>
        <li><strong>Single stop = solid color</strong> (set minStops=1 to allow)</li>
        <li>Circular angle picker for linear gradients</li>
        <li>Linear, Radial, Conic & Repeating gradients</li>
        <li>Built with Angular Signals for optimal performance</li>
        <li>Standalone components - no module needed</li>
        <li>Full two-way binding support</li>
        <li>Works with Reactive Forms</li>
        <li>Fully customizable dimensions</li>
        <li>Zero dependencies (except Angular)</li>
      </ul>
    </section>

    <!-- CSS Customization Section -->
    <section class="demo-section css-customization">
      <h2>CSS Customization</h2>
      <p>Override these CSS classes to customize the appearance of the picker:</p>
      
      <h3>Main Container</h3>
      <div class="css-classes-grid">
        <div class="css-class-item">
          <code>.gradient-picker-container</code>
          <span>Main wrapper with background, padding, border-radius</span>
        </div>
        <div class="css-class-item">
          <code>.gradient-picker-header</code>
          <span>Header containing type picker and angle picker</span>
        </div>
        <div class="css-class-item">
          <code>.gradient-picker-body</code>
          <span>Body containing palette and color stops</span>
        </div>
      </div>

      <h3>Color Stops</h3>
      <div class="css-classes-grid">
        <div class="css-class-item">
          <code>.color-stop-marker</code>
          <span>The circular color stop marker (16px default)</span>
        </div>
        <div class="css-class-item">
          <code>:host.dragging</code>
          <span>Applied when stop is being dragged</span>
        </div>
        <div class="css-class-item">
          <code>:host.deleting</code>
          <span>Applied when stop is about to be deleted</span>
        </div>
      </div>

      <h3>Palette</h3>
      <div class="css-classes-grid">
        <div class="css-class-item">
          <code>.palette-svg</code>
          <span>The gradient preview bar (SVG element)</span>
        </div>
        <div class="css-class-item">
          <code>.repeat-marker</code>
          <span>Repeat position marker (for repeating gradients)</span>
        </div>
        <div class="css-class-item">
          <code>.repeat-marker-handle</code>
          <span>Draggable handle on repeat marker</span>
        </div>
      </div>

      <h3>Angle Picker</h3>
      <div class="css-classes-grid">
        <div class="css-class-item">
          <code>.angle-picker-container</code>
          <span>Container for the angle dial</span>
        </div>
        <div class="css-class-item">
          <code>.dial</code>
          <span>The circular dial element</span>
        </div>
        <div class="css-class-item">
          <code>.angle-tooltip</code>
          <span>Tooltip showing angle during drag</span>
        </div>
      </div>

      <h3>Type Picker</h3>
      <div class="css-classes-grid">
        <div class="css-class-item">
          <code>.type-picker-container</code>
          <span>Container for type toggle buttons</span>
        </div>
        <div class="css-class-item">
          <code>.type-toggle</code>
          <span>Type toggle button (linear/radial/conic)</span>
        </div>
        <div class="css-class-item">
          <code>.repeat-toggle</code>
          <span>Repeat mode toggle button</span>
        </div>
      </div>

      <h3>Popover</h3>
      <div class="css-classes-grid">
        <div class="css-class-item">
          <code>.popover-trigger</code>
          <span>The button that opens the popover</span>
        </div>
        <div class="css-class-item">
          <code>.popover-content</code>
          <span>The popover container</span>
        </div>
        <div class="css-class-item">
          <code>.popover-backdrop</code>
          <span>Backdrop overlay (bottom-sheet mode)</span>
        </div>
      </div>

      <h3>Bottom-Sheet Mode</h3>
      <div class="css-classes-grid">
        <div class="css-class-item">
          <code>.popover-content.bottom-sheet</code>
          <span>Bottom-sheet container (full-width, slides from bottom)</span>
        </div>
        <div class="css-class-item">
          <code>.bottom-sheet-handle</code>
          <span>The drag handle bar at the top of bottom-sheet</span>
        </div>
        <div class="css-class-item">
          <code>:host.is-bottom-sheet</code>
          <span>Applied to host when in bottom-sheet mode</span>
        </div>
        <div class="css-class-item">
          <code>env(safe-area-inset-bottom)</code>
          <span>Safe area padding for notched devices</span>
        </div>
      </div>

      <div class="code-block">
        <div class="code-header">
          <span>Example</span>
        </div>
        <pre><code>/* Custom styling example */
::ng-deep .gradient-picker-container &#123;
  background: #1a1a2e;
  border-radius: 16px;
  box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
&#125;

::ng-deep .color-stop-marker &#123;
  width: 20px;
  height: 20px;
  border-width: 3px;
&#125;

::ng-deep .palette-svg &#123;
  border-radius: 8px;
&#125;</code></pre>
      </div>
    </section>

    <!-- Angular Compatibility -->
    <section class="demo-section compatibility">
      <h2>Angular Compatibility</h2>
      <table class="compat-table">
        <thead>
          <tr>
            <th>ngx-gradient-picker</th>
            <th>Angular</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td>1.x</td>
            <td>17.x, 18.x, 19.x, 20.x</td>
          </tr>
        </tbody>
      </table>
    </section>
  </main>

  <footer class="demo-footer">
    <div class="footer-links">
      <a href="https://github.com/MikhaelGerbet/ngx-gradient-picker" target="_blank">GitHub</a>
      <a href="https://www.npmjs.com/package/ngx-gradient-picker" target="_blank">npm</a>
    </div>
    <p>ngx-gradient-picker © {{ currentYear }} <a href="https://github.com/MikhaelGerbet" target="_blank">Mikhaël GERBET</a> | MIT License</p>
  </footer>
</div>
